{"description":"Learn the basics of the \"hackers' Swiss army knife\"","goal":"<p>Study how to connect to TCP/UDP ports, forge HTTP requests, transfer files and setup a simple Remote Administration scenario with Netcat.</p>","solution":"<h3>Netcat command line options</h3>\n<p>First off, take some time to inspect Netcat's command line options. Access Alice's command line and type:</p>\n<p style=\"padding-left: 30px;\">$ ncat -h</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/ncat_options.png\" alt=\"Netcat command line options\" width=\"1209\" height=\"939\" /></p>\n<h3>Connecting to a TCP/UDP port</h3>\n<p>You can connect to TCP port 21 on host 193.20.1.4 which runs an ftp server:</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/ncat_ftp.png\" alt=\"\" width=\"601\" height=\"115\" /></p>\n<h3>Listening on a TCP/UDP port</h3>\n<p>You can also listen on TCP/UDP ports in order to receive TCP/UDP network connections. Let's try that out by implementing a simple chat using Netcat.</p>\n<p>Go to Alice's command line and type</p>\n<p style=\"padding-left: 30px;\">$ ncat -lvp 4444</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/chat_alice.png\" alt=\"\" width=\"431\" height=\"73\" /></p>\n<p>Then, access Bob's container and type</p>\n<p style=\"padding-left: 30px;\">$ ncat -v 193.20.1.2 4444</p>\n<p>...and start chatting!</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/chat_bob.png\" alt=\"\" width=\"545\" height=\"133\" /></p>\n<h3>Transferring files using Netcat</h3>\n<p>Netcat can be also used to transfer binary or text files from one computer to another.</p>\n<p>From Alice's command line, let's set up Netcat to listen and accept connections on port 4444 and redirect any input into a text file:</p>\n<p style=\"padding-left: 30px;\">$ ncat -lvp 4444 &gt; output.txt</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/listen_redirect.png\" alt=\"\" width=\"482\" height=\"70\" /></p>\n<p>Then, from Bob's container, let's create a text file, connect to Alice's computer and send the file.</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/send_text_file.png\" alt=\"\" width=\"474\" height=\"104\" /></p>\n<p>Now, inside Alice's container, check that the file has been correctly received:</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/file_transferred.png\" alt=\"\" width=\"456\" height=\"56\" /></p>\n<p>Got it!</p>\n<h3>Remote administration: Bind Shell Scenario</h3>\n<p>One of Netcat's key features is command redirection: it can redirect an executable file's stdin/stdout/stderr to a TCP/UDP port. If we bind, for example, /bin/bash to a local port, any computer connecting to this port will be presented with a shell that belongs to this computer.</p>\n<p>Go to alice's machine and bind /bin/bash to a TCP port which Bob will connect to later.</p>\n<p style=\"padding-left: 30px;\">$&nbsp; ncat -lvvp 4444 -e /bin/bash</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/bind_shell_bob.png\" alt=\"\" width=\"640\" height=\"95\" /></p>\n<p>Now go to Bob's container and connect to port 4444.</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/bind_shell_alice.png\" alt=\"\" width=\"649\" height=\"373\" /></p>\n<p>As you can see, after the connection you are presented with Alice's command line and typing $ifconfig will show Alice's network configuration.</p>\n<h3>Remote administration: Reverse shell scenario</h3>\n<p>Another useful feature is the ability to send a command shell to a listening host. This is the most common way to create a backdoor once privilege escalation is completed.</p>\n<p>Let's set up Bob's Netcat to listen on TCP port 4444.</p>\n<p style=\"padding-left: 30px;\">$ ncat -lvvp 4444</p>\n<p>Then go to Alice's command line and send a shell to Bob</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/reverse_shell_alice.png\" alt=\"\" width=\"446\" height=\"79\" /></p>\n<p>Now, on Bob's container, we are able to type commands in Alice's shell:</p>\n<p><img src=\"https://raw.githubusercontent.com/NS-unina/DSP_Repo/master/Netcat%20the%20Almighty/.images/reverse_shell_bob.png\" alt=\"\" width=\"688\" height=\"441\" /></p>\n<p>Owned!</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>","author":"efrcatu"}
